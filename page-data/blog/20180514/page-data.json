{"componentChunkName":"component---src-templates-post-post-jsx","path":"/blog/20180514","result":{"data":{"markdownRemark":{"html":"<p>因本人對於 this 的用法還沒有很熟悉，特此再找些資源複習個並做個筆記，也方便之後自己混淆了可以查找，若有錯誤或不當解說還請不吝指教。</p>\n<p>this 指向的六種情況（取決於函數是如何執行的）</p>\n<h2>一、this 指向<em>調用</em>該函示的物件</h2>\n<deckgo-highlight-code javascript  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">Object.functionName(); //函式內的 this 指向此物件</code>\n        </deckgo-highlight-code>\n<h2>二、this 指向全域物件</h2>\n<p>若直接調用函式前方沒有物件（非物件.函式()），則函式內 this 指向全域物件，例如瀏覽器會指向 window 物件。若為 es6 中嚴格模式下（”use strict”），this 被規定不指全域而是 undefined。<br>\n※ 延伸：容易混淆的借用函式範例</p>\n<deckgo-highlight-code javascript  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">var x = 10;\nvar obj = {\n  x: 20,\n  f: function() {\n    console.log(this.x);\n  },\n};\n\nobj.f(); // this 指向 obj, x = 20\nvar fOut = obj.f;\nfOut(); // 函式前無 obj, this 指向全域, x = 10\nvar obj2 = {\n  x: 30,\n  f: obj.f,\n};\nobj2.f(); // obj2 調用函式 f , this 指向 obj2, x = 30</code>\n        </deckgo-highlight-code>\n<h2>三、利用 bind(), call() 或 apply() 將 this 改變所指物件</h2>\n<p><code>bind</code> 可代入想直接替換成 this 的所指物件。（可在匿名函式宣告的花括號結尾處 <code>.bind(obj)</code>）<br>\n<code>call</code> 與 <code>apply</code> 都是呼叫該函式並讓該函式的 this 指向第一個物件參數，差在其後的參數為攤平給（call）還是陣列給（apply）。<br>\n※ bind 是複製原本的函式，並且將你所指定的 this 代入這個函式中；而 call 和 apply 則是將你所指定的 this 直接代入該 function 中並執行。</p>\n<h2>四、this 指向 new 所產生之新物件</h2>\n<p>若將函式當作建構式來用，則內部的 this 則指向於 new 所產生之新物件。<br>\n但要注意若建構式回傳的是 object 對象，則 new 操作後返回的是此對象而不是 this。</p>\n<deckgo-highlight-code javascript  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\"  highlight-lines=\"\">\n          <code slot=\"code\">var MyClass = function() {\n  this.name = &#39;Lin&#39;;\n  return {\n    name: &#39;Yu Lin&#39;,\n  };\n};\nvar obj = new MyClass();\nconsole.log(obj.name); // Yu Lin</code>\n        </deckgo-highlight-code>\n<h2>五、callback 函式內的 this 指向於調用放入該 callback 的函式的 this 所指物件</h2>\n<p>待補充說明。</p>\n<h2>六、ES6 箭頭函數當中的 this 是<em>定義</em>時的對象，非使用時的對象</h2>\n<p>箭頭函式中的 this 定義時所在的對象，且固定不改變。<br>\n※ 一般不建議在對象物間中用箭頭函式定義函數</p>\n<hr>\n<h2>複習：</h2>\n<ol>\n<li>無參數或多參數時要括號，單一參數可省略括號</li>\n<li>若只是回傳單一值一般會省略 return</li>\n<li>javascript 遵循詞法作用域（Lexical Scope），若無定義會向上查找</li>\n<li>Arrow Function 本身沒有 this，所以會遵循詞法作用域向上查找</li>\n</ol>\n<h2>參考文章</h2>\n<ul>\n<li><a href=\"https://software.intel.com/zh-cn/blogs/2013/10/09/javascript-this\" target=\"_blank\" rel=\"nofollow\">Javascript：this 用法整理</a></li>\n<li><a href=\"https://pjchender.blogspot.tw/2017/01/es6-arrow-function.html\" target=\"_blank\" rel=\"nofollow\">[筆記] JavaScript ES6 中的箭頭函數（arrow function）及對 this 的影響</a> <br><br></li>\n</ul>\n<p>在還不熟悉 this 所指時又遇上了 ES6，真的滿混淆的 XD<br>\n不過果然還是要實際各用法都寫過才會有比較深刻的印象，之後也許會再自己寫些練習或範例來補充個。</p>","timeToRead":2,"frontmatter":{"title":"JavaScript 中 this 指向","date":"14 May 2018","tags":["javascript"],"path":"blog/20180514","excerpt":"簡介 this 指向的六種情況。"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"blog/20210110","title":"Pop Quiz","tags":["javascript"],"excerpt":"記錄踩到的陷阱題。"}}},{"node":{"frontmatter":{"path":"blog/20210109-3","title":"REST / RESTful & HTTP Methods","tags":["javascript"],"excerpt":"簡易整理。"}}},{"node":{"frontmatter":{"path":"blog/20191107","title":"Javascript Event loop - macro task & micro task","tags":["javascript"],"excerpt":"介紹 Event loop 容易混淆的異步任務 macro task & micro task。"}}},{"node":{"frontmatter":{"path":"blog/20190906","title":"初探 Storybook","tags":["javascript"],"excerpt":"初探這款能夠在開發前端元件或是函式庫的同時，可以快速地建立元件各種操作模式或是樣式的工具。"}}},{"node":{"frontmatter":{"path":"blog/20190707","title":"JavaScript HTML5 Web Worker & CRA 使用踩雷","tags":["javascript"],"excerpt":"JavaScript 是單執行緒、單線程的程式語言，所有的程式碼片段都會在堆疊中被執行，Web worker 相當於可讓主線程開其他 thread。"}}},{"node":{"frontmatter":{"path":"blog/20190108","title":"JavaScript 認識非同步 Callback, Promise, async/await","tags":["javascript"],"excerpt":"Asynchronous 非同步的不同寫法的整理筆記。"}}},{"node":{"frontmatter":{"path":"blog/20180521","title":"Web 常見攻擊手法","tags":["security"],"excerpt":"擁有基本的資安觀念保護好自家資料和 user 使用環境是開發人員重要的一點。"}}},{"node":{"frontmatter":{"path":"blog/20170728","title":"WebForm 註冊 JavaScript","tags":["asp.net","javascript"],"excerpt":"動態產生JS在目前公司專案中是滿常用到的小技巧，不同的用法會產生在Web Page 的不同位置而有直譯式語言的前後順序差。"}}},{"node":{"frontmatter":{"path":"blog/20170714","title":"WebForm 使用 reCAPTCHA 驗證","tags":["asp.net"],"excerpt":"這個我不是機器人驗證一定不陌生，滿多登入畫面會看到的，剛好今天接到把圖形驗證改為 reCAPTCHA 就順手記下。"}}},{"node":{"frontmatter":{"path":"blog/20170604","title":"Web App 推播通知","tags":["asp.net"],"excerpt":"隨著行動和穿載裝置的興起，推播通知 (Push Notification) 成為維繫App用戶關係相當有力的工具"}}},{"node":{"frontmatter":{"path":"blog/20170508","title":"WebForm 圖片上傳檢查","tags":["asp.net"],"excerpt":"開放上傳有可能被傳奇怪東西的風險，只檢查所看到的副檔名，謹慎來說似乎是不夠的。"}}},{"node":{"frontmatter":{"path":"blog/20170421","title":"存取遠端 EventLog","tags":["asp.net","javascript"],"excerpt":"在公司中實作一個 Event log 的查詢工具。（之後來寫了 D3 呈現查詢異常查詢的部分）"}}},{"node":{"frontmatter":{"path":"blog/20210109","title":"Response Set-Cookie 無效","tags":["apollo"],"excerpt":"記錄個之前在和同事們弄 Side project 時犯蠢遇到的問題與解決方式。"}}},{"node":{"frontmatter":{"path":"blog/20191125","title":"初探 RxJS（下）","tags":["rxjs"],"excerpt":"簡介上次未完的 RxJS 剩餘角色，和介紹目前公司後台專案使用的 redux-observable。"}}},{"node":{"frontmatter":{"path":"blog/20200518","title":"常用 NoSQL 雲端資料庫 - Part 1 MongoDB","tags":["mongodb"],"excerpt":"簡介 Relational/NoSQL database、mongoose ORM 寫 mongo CRUD API。"}}},{"node":{"frontmatter":{"path":"blog/20190906-2","title":"React Hooks - useCallback, useMemo, useRef","tags":["reactjs"],"excerpt":"JavaScript 是單執行緒、單線程的程式語言，所有的程式碼片段都會在堆疊中被執行，Web worker 相當於可讓主線程開其他 thread。"}}},{"node":{"frontmatter":{"path":"blog/20190907","title":"GraphQL & Apollo Client","tags":["apollo"],"excerpt":"簡單介紹 React Client 端如何用 Apollo 對 GraphQL Server 做資料存取操作。"}}},{"node":{"frontmatter":{"path":"blog/20210109-2","title":"IntersectionObserver","tags":["javascript"],"excerpt":"公司專案有個日期連動的 scroll 優化試驗，原先是監聽 scroll。"}}},{"node":{"frontmatter":{"path":"blog/20200910","title":"Apollo Server 入門篇","tags":["apollo"],"excerpt":"快速複習去年分享的 GraphQL Schema 和 Client query 語法，並簡介如何以 Apollo Server 建立 GraphQL Server。"}}},{"node":{"frontmatter":{"path":"blog/20200630","title":"Express - Authentication, Authorization and Security","tags":["security","express"],"excerpt":"簡介 Express RESTful API Server 範例中 JWT 權限、授權相關。"}}},{"node":{"frontmatter":{"path":"blog/20200527","title":"常用 NoSQL 雲端資料庫 - Part 2 Firebase","tags":["firebase"],"excerpt":"簡介 Google 提供的後端服務平臺（BaaS）中的兩種 DB，realtime database 和 cloud firestore。"}}},{"node":{"frontmatter":{"path":"blog/20191017","title":"初探 RxJS（上）","tags":["rxjs"],"excerpt":"簡介相關的設計模式中的 Behavioral Pattern，再介紹 RxJS（先講 Observable）"}}},{"node":{"frontmatter":{"path":"blog/20190909","title":"Prisma - Schema, Data Model, Relations, Client","tags":["prisma"],"excerpt":"未來 Side project 可能會應用到的 SDL first 開發流程角度，簡介此可以取代傳統 ORM 的 DB toolkit。"}}}]}},"pageContext":{"postPath":"blog/20180514","translations":[{"hreflang":"en","path":"/blog/20180514"}]}},"staticQueryHashes":["4097791827"]}