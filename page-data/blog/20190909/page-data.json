{"componentChunkName":"component---src-templates-post-post-jsx","path":"/blog/20190909","result":{"data":{"markdownRemark":{"html":"<p><a href=\"https://hackmd.io/mOTKzMwoRyaDvP2NkyV6MQ?view\" target=\"_blank\" rel=\"nofollow\">HackMD</a></p>\n<blockquote>\n<p>Prisma replaces traditional ORMs and can be used to build GraphQL servers, REST APIs, microservices &#x26; more.</p>\n</blockquote>\n<h1>Prisma Schema</h1>\n<ul>\n<li>æˆ‘å€‘æ¡ç”¨ <code>schema.prisma</code> å®šç¾©å®Œ prisma schema å¾Œï¼Œæ‰å»ºç«‹ã€ä¿®æ”¹ MySQL çš„ Tables çš„æ–¹å¼ï¼Œæ‰€ä»¥å¾é€™é–‹å§‹</li>\n<li>æƒ³äº†è§£å°æ‡‰çš„ sql èªå¥è«‹<a href=\"https://www.prisma.io/docs/guides/database-workflows/unique-constraints-and-indexes\" target=\"_blank\" rel=\"nofollow\">è‡ªè¡Œåƒè€ƒ DATABASE WORKFLOWS åæ¨</a></li>\n</ul>\n<p>ä»¥ä¸‹éƒ½æ˜¯åœ¨ <code>schema.prisma</code> è£¡</p>\n<h2>Generators</h2>\n<p>æŒ‡å®š <code>prisma generate</code> ç”¢çš„ assets</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">generator client {\n  provider      = &quot;prisma-client-js&quot;\n  output        = &quot;node_modules/@prisma/client&quot; # default\n  binaryTargets = [&quot;native&quot;]    # default æŒ‡å®šç‚ºç›®å‰çš„ OS\n}</code>\n        </deckgo-highlight-code>\n<ul>\n<li><code>provider</code> requiredï¼šç›®å‰ç”¨ <code>prisma-client-js</code></li>\n<li><code>output</code> optinalï¼šPrisma Client ä½ç½®ï¼ˆDefault: node_modules/@prisma/clientï¼‰</li>\n<li>\n<p><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/generators/#binary-targets\" target=\"_blank\" rel=\"nofollow\"><code>binaryTargets</code> optional</a>ï¼šæŒ‡å®š Prisma Client run åœ¨å“ªå€‹ OS</p>\n<ul>\n<li>ä¾‹ï¼šMac OS <code>binaryTargets = [\"darwin\"]</code></li>\n</ul>\n</li>\n</ul>\n<h2>Specify a MySQL data source</h2>\n<p><code>schema.prisma</code> æœ€ä¸Šæ–¹\nMySQL connection URL:<code>mysql://USER:PASSWORD@HOST:PORT/DATABASE</code>\n<img src=\"https://i.imgur.com/9ajoHE5.png\">\n<a href=\"https://www.prisma.io/docs/reference/database-connectors/mysql#connection-details\" target=\"_blank\" rel=\"nofollow\">Arguments å°±æœ‰éœ€æ±‚å†ä¾†æŸ¥ï¼Œå¯ä»¥è¨­å®šäº›é€£ç·šç›¸é—œ</a></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">datasource mysql {\n  provider = &quot;mysql&quot;\n  url      = &quot;mysql://johndoe:mypassword@localhost:5432/mydb&quot;\n}</code>\n        </deckgo-highlight-code>\n<h2>Data Model</h2>\n<h3>Model, Scalar Type, Enum</h3>\n<ul>\n<li>Model å¯ä»¥ä»£è¡¨ db çš„ tableã€prisma client queries çš„åŸºåº•</li>\n<li>Model çš„ field å‹åˆ¥å¯ä»¥å®šç¾©æˆ 1. Scalar Typeï¼šString, Boolean, Int, Float, DateTime(Date), JSON(Object)ã€Enum * Enumï¼šå›ºå®š constant å¯ä»¥å®£å‘Šæˆ enum\n<code>jsonld enum Role { USER ADMIN } model User { id Int @id @default(autoincrement()) role Role }</code> 2. Modelï¼ˆrelation fieldï¼‰</li>\n<li>\n<p>Type modifiersï¼š<code>[]</code>, <code>?</code></p>\n<ul>\n<li>List çš„è¡¨ç¤ºæ³• <code>MODELNAME[]</code>\nScalar list åªé©ç”¨ data modelï¼ˆä½œç‚º relation fieldï¼‰\nä¾‹å¦‚ <code>posts Post[]</code> * å…è¨±ç©ºå€¼çš„ field è¨˜å¾— TYPE å³é‚ŠåŠ  <code>?</code>ï¼ˆoptionalï¼‰ï¼Œtable ä¸­æœƒå­˜ç‚º NULLï¼Œä¾‹å¦‚ <code>headThumb String? @map(name: \"head_thumb\")</code>ï¼ˆList ä¾‹å¤–å®ƒä¸éœ€è¦åŠ ï¼‰ï¼›ä¸€èˆ¬æ˜¯ required</li>\n</ul>\n</li>\n<li>\n<p>Modelsã€Fieldsã€Enums namingï¼š<code>[A-Za-z][A-Za-z0-9_]*</code></p>\n<ul>\n<li>Modelsã€Enums ç¿’æ…£ PascalCase</li>\n<li>Fields ç¿’æ…£ camelCase</li>\n</ul>\n</li>\n</ul>\n<h3>Attributes, Functions</h3>\n<p>é™¤äº† List ä»¥å¤–ï¼Œéƒ½å¯ä»¥é…ç½® attribue ä¿®é£¾ç¬¦ä»£è¡¨ã€ç´„æŸï¼Œå¸¸ç”¨å¦‚</p>\n<ul>\n<li>\n<p>attributesï¼ˆå¹¾ä¹éƒ½æœ‰å¯ä»¥åˆªé™¤çš„ argument nameï¼Œå¯ä»¥ç´„å®šéƒ½ç°¡å¯«ï¼‰\n<code>@</code> for field; <code>@@</code> for block</p>\n<ul>\n<li><code>@id</code> æ¯å€‹ Model æœ€å¤šä¸€å€‹</li>\n<li>field id é€šå¸¸æœƒæ­é…é è¨­å€¼ï¼Œä¾‹ <code>@default(autoincrement())</code> é è¨­+1</li>\n<li>çµ„åˆ idï¼Œä¾‹ <code>@@id([title, author])</code>ã€<code>@@id(fields: [title, author])</code></li>\n<li><code>@default(VALUE)</code> field æœªçµ¦å¡é è¨­å€¼</li>\n<li>ä¾‹ï¼š<code>@default(now())</code>ã€<code>@default(value: autoincrement())</code></li>\n<li><code>@unique</code> é™åˆ¶ field å”¯ä¸€</li>\n<li>çµ„åˆ fields <code>@@unique</code> é™åˆ¶å”¯ä¸€ï¼Œä¾‹ <code>@@unique([title, author])</code>ã€<code>@@unique(fields: [title, author])</code></li>\n<li>\n<p>è£œå……ï¼šSQL ä¸­ PRIMARY KEY æ˜¯ç”¨ä¾†ä¿è­‰æ¬„ä½åœ¨è³‡æ–™è¡¨ä¸­çš„å”¯ä¸€æ€§ï¼Œä¸»éµæ¬„ä½ä¸­çš„æ¯ä¸€ç­†è³‡æ–™åœ¨è³‡æ–™è¡¨ä¸­éƒ½å¿…éœ€æ˜¯ç¨ä¸€ç„¡äºŒçš„ï¼ˆé€šå¸¸ç‚º idï¼‰</p>\n<ul>\n<li>PRIMARY KEY æœ‰é»é¡ä¼¼ UNIQUE åŠ ä¸Š NOT NULL</li>\n<li>ä¸€å€‹è³‡æ–™è¡¨ä¸­åªèƒ½æœ‰ä¸€å€‹ PRIMARY KEYï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šå€‹ UNIQUE</li>\n</ul>\n</li>\n<li><code>@@index</code> å»ºç«‹ç´¢å¼•ï¼Œåˆ©æ–¼æŸ¥è©¢æ•ˆç‡ï¼ˆç©ºé–“æ›é€Ÿåº¦ï¼‰</li>\n<li>é€šå¸¸æœƒåœ¨ Primary Keyã€Foreign Key æˆ–å¸¸æ”¾åœ¨æŸ¥è©¢å­å¥ä¸­çš„ field å»ºç«‹ç´¢å¼•ï¼Œä¾‹ <code>@@index([title, author])</code>ã€<code>@@index(fields: [title, author])</code></li>\n<li><code>@updatedAt</code> æœ‰æ›´å‹•è©²ç­†è³‡æ–™æ™‚è‡ªå‹•æ›´æ–°æ›´æ–°æ™‚é–“</li>\n<li><code>@map</code> æ˜ å°„èˆ‡ field ä¸åŒåçš„ table columnï¼›<code>@@map</code> æ˜ å°„èˆ‡ model ä¸åŒåçš„ table name</li>\n<li>ä¾‹ï¼š<code>@map(\"is_admin\")</code>ã€<code>@map(name: \"is_admin\")</code></li>\n<li>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">          enum Role {\nADMIN     @map(&quot;admin&quot;)\nCUSTOMER  @map(&quot;customer&quot;)\n@@map(&quot;_Role&quot;)\n}</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p><code>@relation</code> é—œè¯å…¶ä»– model (table)ï¼Œç•¶ä¸­æœ€è¤‡é›œå°±å®ƒï¼Œå¾Œé¢å†ä»‹ç´¹ã€‚<a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations#the-relation-attribute\" target=\"_blank\" rel=\"nofollow\">æƒ³å…ˆäº†è§£ç†Ÿæ‚‰å¯çœ‹é€™</a></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">    @relation(fields: [userId], references: [id])\n@relation(fields: [userFirstName, userLastName], references: [firstName, lastName])\n@relation(name: &quot;UserOnPost&quot;, references: [id])\n@relation(&quot;UserOnPost&quot;, references: [id])\n# é—œè¯çš„éƒ½æ˜¯ id æ™‚å¯ä»¥çœç•¥ references\n@relation(name: &quot;UserOnPost&quot;)\n@relation(&quot;UserOnPost&quot;)</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n</li>\n<li>\n<p>functions (é€šå¸¸ç”¨åœ¨ default)</p>\n<ul>\n<li><code>autoincrement()</code> æ–°å¢çš„è³‡æ–™ id è‡ªå‹• +1ï¼ˆIntï¼‰</li>\n<li><code>cuid()</code> æ ¹æ“š cuid spec ç”¢ç”Ÿ globally unique identifier</li>\n<li><code>uuid()</code> æ ¹æ“š UUID spec ç”¢ç”Ÿ globally unique identifier</li>\n<li><code>now()</code> å¸¸ç”¨æ–¼æ–°å¢è³‡æ–™çš„å»ºç«‹æ™‚é–“é è¨­å€¼ï¼ˆDateTimeï¼‰</li>\n</ul>\n</li>\n</ul>\n<h2>Unique constraints <code>@unique</code></h2>\n<p>MySQL çš„ constraint / indexï¼Œåœ¨ prisma model æ˜¯è¨­ <code>@unique</code> é™å®šå”¯ä¸€ï¼Œå¯ä»¥å–®ç¨ column è¨­ã€ä¹Ÿå¯ä»¥å¤šå€‹ column çµ„åˆæˆå”¯ä¸€ï¼ˆå†å¦å¤–å‘½åï¼‰ï¼Œä¸€å¼µè¡¨å¯ä»¥æœ‰å¤šå€‹ unique\nå¯ä»¥åœ¨å»ºç«‹ table æ™‚å°±å…ˆè¨­å¥½ï¼Œæˆ–æ˜¯å»ºå¥½çš„ table å†ä¿®æ”¹\nid æœ‰ <code>@id</code> å°±ä¹Ÿæ˜¯å”¯ä¸€äº†ä¸éœ€è¦çµ¦ <code>@unique</code></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  firstName String?\n  id        Int     @default(autoincrement()) @id # é€™é‚Š default æ˜¯æŒ‡ä¸éœ€è¦çµ¦å®ƒæœƒè‡ªå‹•+1\n  lastName  String?\n  account   String  @unique\n  @@unique([firstName, lastName], name: &quot;firstName&quot;)\n}</code>\n        </deckgo-highlight-code>\n<h2><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations\" target=\"_blank\" rel=\"nofollow\">Connect Model <code>@relation</code> ğŸ”†</a></h2>\n<ul>\n<li>MySQL è¡¨å’Œè¡¨ä¹‹é–“çš„é—œè¯æ–¹å¼ï¼Œå»ºç«‹è¡¨æ ¼æ™‚ç•™å€‹å­˜é—œè¯çš„è¡¨çš„ id çš„ columnï¼Œé€™å€‹èˆ‡å¤–è¡¨é—œè¯çš„ id å°±æ˜¯ foreign keyï¼ˆç¿’æ…£å« xxxIdï¼‰ï¼›åœ¨ prisma model é–“çš„é—œè¯å‰‡æ˜¯è¨­ <code>@relation</code></li>\n<li>Relation fieldsï¼šæ²’æœ‰ Scalar Typeï¼Œå…¶ Type æ˜¯å…¶ä»– Modelã€‚æ¯å€‹è¡¨å’Œè¡¨çš„é—œè¯ï¼Œå…©æ–¹æœƒå„æœ‰ä¸€æˆ–å¤šå€‹ relation field</li>\n<li><code>@relation(_ name: String?, fields: FieldReference[]?, references: FieldReference[]?)</code></li>\n</ul>\n<p>Relation æœ‰ä¸‰ç¨® <code>1-1</code>ã€<code>1-n</code>ã€<code>m-n</code>\nç›´æ¥é‚Šçœ‹ç¯„ä¾‹é‚Šäº†è§£ï¼š\nï¼±ï¼šå‡è¨­ä»Šå¤©æœ‰ Userã€Profileã€Categoryã€Post å››å€‹ Modelï¼Œè©¦è‘—è¬›å‡ºä»–å€‘çš„é—œä¿‚ï¼š</p>\n<blockquote>\n<p>User â†” Profile\nUser â†” Post\nPost â†” Category</p>\n</blockquote>\n<p>ï¼±ï¼šæœƒæ€éº¼å¯¦ä½œ Model æœƒæ€éº¼å¯¦ä½œé–“çš„é—œè¯ï¼Ÿ\n<img src=\"https://i.imgur.com/YNLZHl2.png\"></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id      Int      @id @default(autoincrement())\n  posts   Post[]\n  profile Profile?\n}\nmodel Profile {\n  id      Int     @id @default(autoincrement())\n  user    User    @relation(fields: [userId], references: [id])\n  userId  Int\n}\nmodel Post {\n  id         Int         @id @default(autoincrement())\n  author     User        @relation(fields: [authorId], references: [id])\n  authorId   Int\n  categories Category[]  @relation(references: [id])\n}\nmodel Category {\n  id     Int     @id @default(autoincrement())\n  posts  Post[]  @relation(references: [id])\n}</code>\n        </deckgo-highlight-code>\n<h3>ä¸€å°ä¸€ 1-1 relation</h3>\n<p>æƒ…å¢ƒï¼šæ¯å€‹ User å¯èƒ½æœƒæœ‰è‡ªå·±çš„ Profile\nå¯«æ³•ä¸€ï¼šforign key åœ¨ Profile</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id      Int      @id @default(autoincrement())\n  profile Profile?\n}\nmodel Profile {\n  id      Int     @id @default(autoincrement())\n  user    User    @relation(fields: [userId], references: [id])\n  userId  Int     // relation scalar field\n}</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/32zx3NN.png\">\nå¯«æ³•äºŒï¼šforign key åœ¨ User</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id         Int       @id @default(autoincrement())\n  profile    Profile?  @relation(fields: [profileId], references: [id])\n  profileId  Int?      // relation scalar field\n}\nmodel Profile {\n  id      Int     @id @default(autoincrement())\n  user    User\n}</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/GoUQKya.png\">\nè£œå……ï¼šmulti-field IDs æ™‚çš„ 1-1</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  firstName String\n  lastName  String\n  profile   Profile?\n  @@id([firstName, lastName])\n}\nmodel Profile {\n  id               Int      @id @default(autoincrement())\n  user             User     @relation(fields: [authorFirstName, authorLastName], references: [firstName, lastName])\n  authorFirstName  String   // relation scalar field\n  authorLastName   String   // relation scalar field\n}</code>\n        </deckgo-highlight-code>\n<h3>ä¸€å°å¤š 1-n relation</h3>\n<p>forign key æœƒåœ¨ non-list field\næƒ…å¢ƒï¼šæ¯ä¸€ User èƒ½æœ‰å¤šç¯‡ Post</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id      Int      @id @default(autoincrement())\n  posts   Post[]\n}\nmodel Post {\n  id         Int         @id @default(autoincrement())\n  author     User        @relation(fields: [authorId], references: [id])\n  authorId   Int         # relation scalar field é—œè¯ User çš„ foreign key\n}</code>\n        </deckgo-highlight-code>\n<p>ä¸Šé¢çš„ <code>posts</code>ã€<code>author</code> æ˜¯ prisma å°ˆå±¬ç”¢ç”Ÿé—œè¯ç”¨æ³• Prisma Client ä¾æ“šï¼Œdatabase table ä¸­<strong>ä¸å­˜åœ¨</strong>çš„ fieldï¼›<code>authorId</code> æ˜¯<strong>å­˜åœ¨</strong>æ–¼ table çš„ forign key å¾—ä»¥é—œè¯ User å’Œ Post<br>\n<img src=\"https://i.imgur.com/S7lL2ID.png%20=500x\"><br>\nspoiler å»ºç«‹ relation å¾Œ generate çš„ Prisma Client æ‡‰ç”¨ä¾‹å­\nå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</p>\n<ul>\n<li>\n<p>æ–°å¢ User åŒæ™‚æ–°å¢ä»–çš„ posts\nï¼ˆuser id ä¸ç”¨çµ¦æ˜¯å› ç‚ºæœ‰ deafultï¼›post authorId å‰‡è‡ªå‹•å­˜ç‚º user idï¼‰</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const userAndPosts = await prisma.user.create({\ndata: {\n  posts: {\n    create: [{ title: &#39;Prisma Day 2020&#39; }, { title: &#39;How to write a Prisma schema&#39; }],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p>æŸ¥è©¢ User å¯åŒæ™‚å–å¾—èˆ‡ä»–é—œè¯çš„ posts</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const getAuthor = await prisma.user.findOne({\nwhere: {\n  id: &#39;20&#39;,\n},\ninclude: {\n  posts: true, // authorId == 20 çš„ post list\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p>æˆ–æ˜¯å·²å­˜åœ¨æ²’æœ‰è¢«é—œè¯çš„ postï¼Œèˆ‡å·²å­˜åœ¨ User åšé—œè¯</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const updateAuthor = await prisma.user.update({\nwhere: {\n  id: 20,\n},\ndata: {\n  posts: {\n    connect: {\n      id: 4,\n    },\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n<p>æ³¨æ„ 1-1 å’Œ 1-n relation ä¸­</p>\n<ul>\n<li>\n<p>relations ä¸­çš„ annotated relation field å’Œ relation scalar å¿…çºŒåŒæ™‚ required æˆ–æ˜¯ optionalï¼Œä¸” List Model å¿…ç‚º required</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\nid        Int      @id @default(autoincrement())\nposts     Post[]\n}\nmodel Post {\nid        Int    @id @default(autoincrement())\nauthor    User?  @relation(fields: [authorId], references: [id])\nauthorId  Int?\n}</code>\n        </deckgo-highlight-code>\n</li>\n<li>1-1 forign key é—œè¯çš„å¿…é ˆæ˜¯ uniqueï¼›1-n ç„¡é™åˆ¶</li>\n<li>\n<p><code>@relation</code> åªæœƒåœ¨å…¶ä¸­ä¸€é‚Š</p>\n<ul>\n<li>ä¸€å€‹ Model åŒæ™‚æœ‰å°åŒ Model çš„å¤šç¨®é—œè¯æœƒæœ‰å¤šå€‹ <code>@relation</code>ï¼ˆè¦ disambiguateï¼šå‘½åå€åˆ†ï¼‰</li>\n<li>æˆ–æ˜¯ self-relationï¼šå¯ä»¥æ˜¯ 1-1, 1-n, m-n</li>\n<li>\n<p>Self-relations on the same model</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">    model User {\nid          Int      @id @default(autoincrement())\nname        String?\nhusband     User?    @relation(&quot;MarriagePartners&quot;)\nwife        User     @relation(&quot;MarriagePartners&quot;)\nteacher     User?    @relation(&quot;TeacherStudents&quot;)\nstudents    User[]   @relation(&quot;TeacherStudents&quot;)\nfollowedBy  User[]   @relation(&quot;UserFollows&quot;)\nfollowing   User[]   @relation(&quot;UserFollows&quot;)\n}</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n</li>\n</ul>\n<h3>å¤šå°å¤š m-n relationï¼ˆImplicitã€explicitï¼‰</h3>\n<h4>Explicit ğŸ”†</h4>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model Post {\n  id         Int                 @id @default(autoincrement())\n  title      String\n  categories CategoriesOnPosts[]\n}\nmodel Category {\n  id    Int                 @id @default(autoincrement())\n  name  String\n  posts CategoriesOnPosts[]\n}\n# è¡¨ç¤º MySQL ç¶“é JOIN, link or pivot çš„ table\nmodel CategoriesOnPosts {\n  post        Post     @relation(fields: [postId], references: [id])\n  postId      Int\n  category    Category @relation(fields: [categoryId], references: [id])\n  categoryId  Int\n  # createdAt DateTime @default(now()) å¯ä»¥åŠ äº› meta-information\n  @@id([postId, categoryId])\n}</code>\n        </deckgo-highlight-code>\n<h4>Implicit</h4>\n<ul>\n<li>ä¸ç”¨çµ¦ relation scalar fieldï¼Œé™¤éæ˜¯åŒæ™‚å¤šå€‹ self-relations</li>\n<li>\n<p>åªèƒ½åœ¨ Model éƒ½æ˜¯ single <code>@id</code> çš„æƒ…æ³ä½¿ç”¨ï¼ˆä¸å¯ä»¥æ˜¯çµ„åˆ id æˆ–æ˜¯ <code>@unique</code>ï¼‰ï¼Œä¸ç¬¦åˆçš„è©±å°±å¾—é¸ç”¨ explicit æ–¹å¼\n<img src=\"https://i.imgur.com/Nf4iCRE.png\"></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\"># çœç•¥ @relation model Post { id Int @id @default(autoincrement()) categories Category[] } model Category { id Int @id @default(autoincrement()) posts Post[] }</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/2fSTQl9.png\"><br>\næ³¨æ„ m-n relation ä¸­</p>\n</li>\n<li>\n<p>Implicitï¼šå…©é‚Šéƒ½è¦ <code>@relation</code> ä¾æ“šå°æ–¹</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model Post {\nid         Int        @id @default(autoincrement())\ncategories Category[] @relation(references: [id])\n}\n\nmodel Category {\nid       Int    @id @default(autoincrement())\nname     String\nposition Int\nposts    Post[] @relation(references: [id])\n}</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/AdoDfYh.png\">\nå¦‚æœæƒ³è‡ªå·±å®šç¾©é—œè¯çš„ table nameï¼š</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model Post {\nid         Int         @id @default(autoincrement())\ncategories Category[]  @relation(&quot;MyRelationTable&quot;)\n}\nmodel Category {\nid    Int     @id @default(autoincrement())\nposts Post[]  @relation(&quot;MyRelationTable&quot;)\n}</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/rikFBeb.png\"></p>\n</li>\n<li>\n<p>Explicitï¼šè¦å®šç¾©é¡å¤–çš„ Model ä»£è¡¨é—œè¯ï¼Œ<code>@relation</code> é›†ä¸­åœ¨é€™ Modelï¼Œä»¥é›™è¡¨ id çµ„åˆåœ¨æ­¤ Model çš„ idï¼Œä¸¦ä¸”å¯ä»¥é¡å¤–åŠ ä¸Šè³‡è¨Šå¦‚å»ºç«‹é—œè¯çš„æ™‚é–“</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model Post {\nid         Int                 @id @default(autoincrement())\ntitle      String\ncategories CategoriesOnPosts[]\n}\nmodel Category {\nid    Int                 @id @default(autoincrement())\nname  String\nposts CategoriesOnPosts[]\n}\nmodel CategoriesOnPosts {\npost        Post     @relation(fields: [postId], references: [id])\npostId      Int\ncategory    Category @relation(fields: [categoryId], references: [id])\ncategoryId  Int\ncreatedAt   DateTime @default(now())\n@@id([postId, categoryId])\n}</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/LTAUsRm.png\">\n<img src=\"https://i.imgur.com/V6Ier26.png\"></p>\n</li>\n<li><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations#conventions-for-relation-tables-in-implicit-m-n-relations\" target=\"_blank\" rel=\"nofollow\">å¦‚æœæ˜¯ introspection generate prisma clientï¼Œåœ¨é‚£å‰ MySQL å¯«è¡¨å¤šå°å¤šçš„é—œè¯å¯åƒè€ƒé€™</a>\nå†ä¸€å€‹ç¯„ä¾‹ï¼š</li>\n</ul>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model AnotherPost {\n  authorFirstName String?\n  authorLastName  String?\n  id              Int          @default(autoincrement()) @id\n  title           String?\n  AnotherUser     AnotherUser? @relation(fields: [authorFirstName, authorLastName], references: [firstName, lastName])\n  @@index([authorFirstName, authorLastName], name: &quot;authorFirstName&quot;)\n}\nmodel AnotherUser {\n  firstName   String?\n  id          Int           @default(autoincrement()) @id\n  lastName    String?\n  AnotherPost AnotherPost[]\n  @@unique([firstName, lastName], name: &quot;firstName&quot;)\n}\nmodel Post {\n  authorId Int?\n  id       Int     @default(autoincrement()) @id\n  title    String?\n  User     User?   @relation(fields: [authorId], references: [id]) # å¤šæ–¹é—œè¯çˆ¶ä¾æ“š\n  @@index([authorId], name: &quot;author&quot;)\n}\nmodel User {\n  id   Int     @default(autoincrement()) @id\n  name String?\n  Post Post[]\n}</code>\n        </deckgo-highlight-code>\n<h3>Self-relations</h3>\n<h4><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations#one-to-one-self-relations\" target=\"_blank\" rel=\"nofollow\">1-1 Self Relations</a></h4>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id             Int     @default(autoincrement()) @id\n  name           String?\n  successorId Int?\n  successor   User?   @relation(&quot;BlogOwnerHistory&quot;, fields: [successorId], references: [id])\n  predecessor User?   @relation(&quot;BlogOwnerHistory&quot;)\n}</code>\n        </deckgo-highlight-code>\n<h4><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations#one-to-many-self-relations\" target=\"_blank\" rel=\"nofollow\">1-n Self Relations</a></h4>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id       Int      @id @default(autoincrement())\n  name     String?\n  teacherId Int?\n  teacher  User?     @relation(&quot;TeacherStudents&quot;, fields: [teacherId], references: [id])\n  students User[]   @relation(&quot;TeacherStudents&quot;)\n}</code>\n        </deckgo-highlight-code>\n<h4><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/relations#many-to-many-self-relations\" target=\"_blank\" rel=\"nofollow\">m-n Self Relations (Implicit)</a></h4>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id          Int      @id @default(autoincrement())\n  name        String?\n  followedBy  User[]   @relation(&quot;UserFollows&quot;, references: [id])\n  following   User[]   @relation(&quot;UserFollows&quot;, references: [id])\n}</code>\n        </deckgo-highlight-code>\n<h5>Ex.</h5>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id          Int      @id @default(autoincrement())\n  name        String?\n  husband     User?    @relation(&quot;MarriagePartners&quot;)\n  wife        User     @relation(&quot;MarriagePartners&quot;)\n  teacher     User?    @relation(&quot;TeacherStudents&quot;)\n  students    User[]   @relation(&quot;TeacherStudents&quot;)\n  followedBy  User[]   @relation(&quot;UserFollows&quot;)\n  following   User[]   @relation(&quot;UserFollows&quot;)\n}</code>\n        </deckgo-highlight-code>\n<h3>Disambiguating relations</h3>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">model User {\n  id           Int     @id @default(autoincrement())\n  name         String?\n  writtenPosts Post[]  @relation(&quot;WrittenPosts&quot;)\n  pinnedPost   Post?   @relation(&quot;PinnedPost&quot;)\n}\nmodel Post {\n  id          Int     @id @default(autoincrement())\n  title       String?\n  author      User    @relation(&quot;WrittenPosts&quot;, fields: [authorId], references: [id])\n  authorId    Int\n  pinnedBy    User?   @relation(name: &quot;PinnedPost&quot;, fields: [pinnedById], references: [id])\n  pinnedById  Int?\n}</code>\n        </deckgo-highlight-code>\n<h2>Cascading deletes</h2>\n<p>å¾—ä»¥å®šç¾©ç•¶ç„¶é™¤ä¸€ç­† data æ™‚ï¼Œæ€éº¼è™•ç†èˆ‡å®ƒé—œè¯çš„å…¶ä»– table çš„è³‡æ–™ (<a href=\"https://www.prisma.io/docs/guides/database-workflows/cascading-deletes/mysql#6-introspect-your-database-with-prisma\" target=\"_blank\" rel=\"nofollow\">MySQL</a>)\nä½†éºæ†¾ç›®å‰æ²’æœ‰æ–¹æ³•èƒ½ä»¥ prisma schema åŒæ¦‚å¿µçš„å‰µå»º table\n<a href=\"https://github.com/prisma/prisma/discussions/2149\" target=\"_blank\" rel=\"nofollow\">https://github.com/prisma/prisma/discussions/2149</a></p>\n<h2>å®šç¾©å¥½å¾Œè¨˜å¾—è¦ <code>npx prisma generate</code> æ‰æœƒç”¢ç”Ÿï¼æ›´æ–° Prisma Client</h2>\n<h1>Prisma Client CRUD (Resolver å…§)</h1>\n<p>ğŸ”† é‡é»ï¼š<a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/relation-queries\" target=\"_blank\" rel=\"nofollow\">Relation queries</a>ï¼Œnesting çš„å¯«æ³•</p>\n<h2>â˜¼ Read</h2>\n<h3>findOne</h3>\n<ul>\n<li>return object æˆ– null</li>\n<li>è¦æ­é… <code>where</code>ï¼Œä¸”æœå°‹æ¢ä»¶è¦è®“çµæœå¿…æˆå”¯ä¸€ï¼Œä¾‹å¦‚ data model attribute æœ‰ <code>@id</code>, <code>@unique</code> ä¿®é£¾çš„ field</li>\n<li>\n<p><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/crud#type\" target=\"_blank\" rel=\"nofollow\">é‚„æœ‰ <code>select</code>, <code>include</code> å¯ä»¥ä½¿ç”¨</a>ï¼ˆåœ¨å…¶ä»– crud method ä¸­ä¹Ÿæ˜¯ç›¸åŒç”¨æ³•ï¼‰ï¼Œä¾‹å¦‚</p>\n<ul>\n<li>\n<p>select: æŒ‡å®šè¦è¢« return çš„ propertiesï¼ˆä½†å¥½åƒç”¨ä¸å¤ªåˆ°ï¼‰</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\"># schema.prisma\nmodel User {\nid      Int      @id @default(autoincrement())\nname    String\nposts   Post[]\n}\nmodel Post {\nid      Int     @id @default(autoincrement())\nauthor  User    @relation(fields: [userId], references: [id])\nauthorId  Int\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\nselect: {\nid: true,\nname: true,\nposts: {\n  include: {\n    author: true,\n  },\n},\n},\n})</code>\n        </deckgo-highlight-code>\n</li>\n<li>include: load relations çš„éƒ¨åˆ†ï¼Œæ²’æœ‰çµ¦ true çš„è©±æœƒå¾—åˆ° null</li>\n<li><code>@relation</code> é¡ä¼¼å»ºç«‹ foreign key é—œè¯åˆ¥çš„ tableï¼Œteacher å°±åƒæŠŠé—œè¯åˆ°çš„éƒ¨åˆ†ä¹Ÿç¶åœ¨é€™å¼µ table å¯ä»¥éš¨æ™‚ include è¼‰å…¥å¾—ä»¥å–ç”¨</li>\n</ul>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">    # schema.prisma\nmodel Course {\n  id             Int              @default(autoincrement()) @id\n  title          String\n  desc           String?\n  teacherId      Int              @map(name: &quot;teacher_id&quot;)\n  teacher        User             @relation(fields: [teacherId], references: [id])\n\n  @@map(name: &quot;course&quot;)\n  @@unique([title, teacherId])\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.course.findOne({\n  where: { id: courseId },\n  include: { teacher: true },\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p>å–®ä¸€ id <code>where</code></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findOne({\nwhere: {\n  id: 42,\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p>çµ„åˆ id <code>where</code></p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\"># schema.prisma\nmodel User {\nfirstName String\nlastName  String\n@@id([firstName, lastName])\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findOne({\nwhere: {\n  firstName_lastName: {\n    firstName: &#39;Alice&#39;,\n    lastName: &#39;Smith&#39;,\n  },\n},\n});\n\n// æˆ–æ˜¯\nconst result = await prisma.user.findOne({\nwhere: {\n  firstName: &#39;Alice&#39;,\n  lastName: &#39;Smith&#39;,\n},\n});\n\n// æˆ–æ˜¯ï¼ˆé€™ç¨®å¯«æ³•æ‰æœ‰ filter çš„æœ€å¤§å½ˆæ€§ï¼‰\n// é è¨­å°±æ˜¯ AND æ‰€ä»¥ä¸Šå…©ä¾‹ä¸ç”¨çµ¦ ANDï¼Œå…¶ä»–é‚„å¯ä»¥ç”¨ NOT, OR\nconst result = await prisma.user.findOne({\nwhere: {\n  AND: [{ firstName: { equals: &#39;Alice&#39; } }, { lastName: { equals: &#39;Smith&#39; } }],\n},\n});</code>\n        </deckgo-highlight-code>\n<p>å…ˆä»‹ç´¹ä¸€ä¸‹ <code>where</code> çš„ç”¨æ³•ï¼šä½œç‚º filter</p>\n</li>\n</ul>\n<h3>- where</h3>\n<ul>\n<li>ä¾æ“š property çš„å‹åˆ¥å¯æ¥å—çš„ <a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/filtering\" target=\"_blank\" rel=\"nofollow\">filter types ä¸å¤ªä¸€æ¨£ï¼Œè«‹åƒè€ƒé€™è£¡</a>ï¼Œä¾‹å¦‚ <code>lt</code>, <code>lte</code>, <code>gt</code>, <code>gte</code>, <code>contains</code>, <code>startsWith</code>, <code>endsWith</code>, <code>equals</code> ç­‰\nç”¨æ³•ç°¡è¨€ä¹‹å°±æ˜¯ï¼šwhere æ¢ä»¶æŸå€‹/list(AND/OR/NOT) property ç„¶å¾Œçµ¦ filter type å’Œ filter å€¼ï¼Œå¹¾ä¹åœ¨ä»»ä½•ä½ æƒ³å¾—åˆ°çš„ç¯©é¸å ´æ™¯éƒ½å¯ä»¥æ’å…¥å€‹ where ä¾†å¯¦è¸ï¼\nï¼ˆä½†å¯«æ³•çœŸçš„æ»¿å¤šç¨®ï¼Œå°±å¾—é ç·´ç¿’ç·´å‡º sense äº†(?)\nè«‹æ­é…åƒé–± <a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/filtering#filter-on-related-records\" target=\"_blank\" rel=\"nofollow\">filtering documentation</a></li>\n<li>\n<p>ä¾†è©¦è‘—è¬›çœ‹çœ‹ä¸‹é¢é€™æ®µæ˜¯åœ¨ç¯©ä»€éº¼ï¼Ÿ</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.post.findMany({\nwhere: {\n  OR: [\n    {\n      title: {\n        contains: &#39;Prisma&#39;,\n      },\n    },\n    {\n      title: {\n        contains: &#39;databases&#39;,\n      },\n    },\n  ],\n  NOT: {\n    title: {\n      contains: &#39;SQL&#39;,\n    },\n  },\n  user: {\n    NOT: {\n      email: {\n        contains: &#39;meeting&#39;,\n      },\n    },\n  },\n},\ninclude: {\n  user: true,\n},\n});</code>\n        </deckgo-highlight-code>\n<p>ä¸Šé¢ä»£è¡¨ï¼šå–å¾—æ‰€æœ‰ title åŒ…å« \"Prisma\" æˆ– \"databases\" ä½†ä¸åŒ…å« \"SQL\"ã€ä¸”é—œè¯çš„ user çš„ email ä¸åŒ…å« \"meeting\" çš„æ‰€æœ‰ post list</p>\n</li>\n<li>\n<p>é—œè¯ record çš„ filter</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.post.findMany({\nwhere: {\n  user: {\n    email: {\n      equals: &#39;sarah@prisma.io&#39;,\n    },\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p><code>where</code> é™¤äº† <code>AND</code>, <code>OR</code>, <code>NOT</code>ï¼Œä¹Ÿå¯ä»¥æ­é… <code>some</code>, <code>every</code>, <code>none</code> ä¾†åšæ¢ä»¶</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\nwhere: {\n  post: {\n    every: {\n      published: true,\n    },\n    some: {\n      content: {\n        contains: &#39;Prisma&#39;,\n      },\n    },\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>ä¸Šé¢ä»£è¡¨ï¼šå–å¾—æ‰€æœ‰ post éƒ½ publishedã€ä¸”å…¶ä¸­æœ‰å…§å®¹å«æœ‰ \"Prisma\" çš„ user list</p>\n</li>\n<li>\n<p><code>include</code> ä¸­ä½¿ç”¨ <code>where</code></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\nwhere: {\n  Post: {\n    some: {\n      published: false,\n    },\n  },\n},\ninclude: {\n  Post: {\n    where: {\n      published: false,\n    },\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>ä¸Šé¢ä»£è¡¨ï¼šå–å¾—æ‰€æœ‰è‡³å°‘ä¸€ç¯‡ post æ²’æœ‰ publish çš„ï¼Œä¸” include æ‰€æœ‰ publish çš„ post list çš„ user çš„ list</p>\n</li>\n<li>\n<p><code>select</code> ä¸­ä½¿ç”¨</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\nwhere: {\n  email: {\n    contains: &#39;prisma.io&#39;,\n  },\n},\nselect: {\n  posts: {\n    where: {\n      published: false,\n    },\n    select: {\n      title: true,\n    },\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>ä¸Šé¢ä»£è¡¨ï¼šå–å¾—æ‰€æœ‰ email å«æœ‰ \"prisma.io\" çš„ user çš„ç¬¦åˆæœª publish çš„ post list\nå…¶å¯¦æ›å€‹è§’åº¦ä»¥ prisma.post.findMany é–‹é ­ä¹Ÿå¯ä»¥å¯«å‡ºåŒæ¦‚å¿µçš„ query</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.post.findMany({\nwhere: {\n  published: false,\n  user: {\n    email: {\n      contains: &#39;prisma.io&#39;,\n    },\n  },\n},\nselect: {\n  title: true,\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n<h3>findMany</h3>\n<ul>\n<li>return list</li>\n<li>\n<p><a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/crud#type-1\" target=\"_blank\" rel=\"nofollow\">é™¤äº† <code>select</code>, <code>include</code> é‚„æœ‰å¾—ä»¥ paginate, filter, å’Œ order çš„ç”¨æ³•</a></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\nwhere: {\n  email: {\n    endsWith: &#39;prisma.io&#39;,\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.post.findMany({\nwhere: {\n  date_created: {\n    gte: new Date(&#39;2020-03-19T14:21:00+0200&#39;) /* Includes time offset for UTC */,\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<ul>\n<li>æ’åºï¼š<code>orderBy</code> field <code>asc</code>ï¼ˆå°åˆ°å¤§ï¼‰ æˆ– <code>desc</code>ï¼ˆå¤§åˆ°å°ï¼‰</li>\n<li><code>take</code> å– list å‰ n ç­†æˆ– <code>cursor</code> å¾Œ n ç­†</li>\n<li><code>skip</code> è·³å‰é n ç­†</li>\n<li><code>cursor</code> æŒ‡ä¸€å€‹ list çš„ä½ç½®ï¼Œé€šå¸¸æ˜¯ id æˆ– unique valueï¼ˆè£œç¯„ä¾‹ï¼‰</li>\n</ul>\n</li>\n</ul>\n<h3>- distinct</h3>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\"># schema.prisma\ngenerator client {\n  provider = &quot;prisma-client-js&quot;\n  previewFeatures = [&quot;distinct&quot;] # è¦å¤šé€™è¡Œè¨­å®šæ‰å¯ä½¿ç”¨\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.findMany({\n  distinct: [&#39;birthday&#39;],\n});</code>\n        </deckgo-highlight-code>\n<h2>â˜¼ Create</h2>\n<h3>create</h3>\n<ul>\n<li>\n<p>å¿…é ˆçµ¦ <code>data</code>ï¼ˆé€šå¸¸å°±æ˜¯å®šç¾©çš„ input object é‚£åŒ…ï¼‰</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.create({\ndata: { email: &#39;alice@prisma.io&#39; },\n});</code>\n        </deckgo-highlight-code>\n<ul>\n<li>æ‰€ä»¥ç•¶ schema å®šç¾©å‚³å…¥çš„æ˜¯ data: XXXInput æ™‚ï¼Œresolver ç¬¬äºŒå€‹åƒæ•¸å¾—çš„ data å¯ç›´æ¥å¡çµ¦ create</li>\n</ul>\n</li>\n<li>return objectï¼Œä¸€æ¨£å¯ä»¥ <code>select</code>ã€<code>include</code></li>\n<li>é—œè¯çš„ typeï¼ˆåˆ¥å¼µ tableï¼‰å¯ä»¥åŒæ™‚ä¸€èµ·æ–°å¢</li>\n<li>\n<p>ç¯„ä¾‹</p>\n<ul>\n<li>\n<p>ä¸€å°å¤šæ™‚çš„åŒæ™‚æ–°å¢ï¼šå‡è¨­æ–°å¢ user åŒæ™‚æ–°å¢ä»–é—œè¯çš„å¤šå€‹ post</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.create({\ndata: {\nemail: &#39;alice@prisma.io&#39;,\nposts: {\n  create: [{ title: &#39;This is my first post&#39; }, { title: &#39;Here comes a second post&#39; }],\n},\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p>ä¸€å°å¤šæ™‚çš„åŒæ™‚æ–°å¢ï¼šæ–°å¢å·²å­˜åœ¨çš„ user post</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.post.create({\ndata: {\ntitle: &#39;Hello World&#39;,\nauthor: {\n  connect: { email: &#39;alice@prisma.io&#39; },\n},\n},\n});</code>\n        </deckgo-highlight-code>\n<p><code>connect</code> çš„ property ä¸€æ¨£å¿…é ˆæ˜¯ id æˆ– uniqueï¼Œè‹¥æ‰¾ç„¡ query æœƒå¤±æ•—ï¼Œæƒ³é¿å… connect é€™ç¨®å¤±æ•—å¯ä»¥ä½¿ç”¨ <code>connectOrCreate</code>ï¼ˆå¾Œé¢è£œå……ï¼‰\nä¸Šé¢ code ä¹Ÿå¯ä»¥æ”¹ä»¥ user update çš„è§’åº¦å¯«ï¼š</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\nposts: {\n  create: { title: &#39;Hello World&#39; },\n},\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n</li>\n</ul>\n<h3>- connectOrCreate</h3>\n<p>å®ƒè·Ÿ distinct ä¸€æ¨£æ˜¯ preview featureï¼Œå¿…é ˆå…ˆå¦‚ä¸‹æ–°å¢ï¼ˆä½†æˆ‘å€‘æ‡‰è©²ä¹Ÿä¸å¤ªéœ€è¦ä½¿ç”¨åˆ°ï¼‰</p>\n<deckgo-highlight-code language=\"json\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\"># schema.prisma\ngenerator client {\n  provider             = &quot;prisma-client-js&quot;\n  experimentalFeatures = [&quot;connectOrCreate&quot;] # è¦å¤šé€™è¡Œè¨­å®šæ‰å¯ä½¿ç”¨\n}</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.post.create({\n  data: {\n    title: &#39;Hello World&#39;,\n    author: {\n      connectOrCreate: {\n        // connectOrCreate is a preview feature and must be enabled!\n        where: { email: &#39;alice@prisma.io&#39; },\n        create: { email: &#39;alice@prisma.io&#39; },\n      },\n    },\n  },\n});</code>\n        </deckgo-highlight-code>\n<h2>â˜¼ Update</h2>\n<h3>update</h3>\n<p>å¤§è‡´å’Œ create ç”¨æ³•ç›¸åŒã€‚update å¯åŒæ™‚æ–°å¢/åˆªé™¤/æ›´æ–°é—œè¯</p>\n<ul>\n<li>å¿…é ˆçµ¦ <code>data</code>ï¼ˆè¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯é€šå¸¸ input object çš„é‚£åŒ…ï¼‰</li>\n<li>\n<p>å¿…é ˆè¦çµ¦ <code>where</code> ç¯© id æˆ– unique</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { id: 1 },\ndata: { email: &#39;alice@prisma.io&#39; },\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>return object æˆ– RecordNotFound failedï¼Œä¸€æ¨£å¯ä»¥ <code>select</code>ã€<code>include</code></li>\n<li>é—œè¯çš„ typeï¼ˆåˆ¥å¼µ tableï¼‰å¯ä»¥åŒæ™‚ä¸€èµ·æ›´æ–°</li>\n<li>\n<p>ç¯„ä¾‹</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\n  posts: {\n    update: [\n      {\n        data: { published: true },\n        where: { id: 32 },\n      },\n      {\n        data: { published: true },\n        where: { id: 23 },\n      },\n    ],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>ä¹Ÿå¯ä»¥ç”¨ <code>upsert</code> å¯ä»¥æ›´æ–°é—œè¯æˆ– create æ–°çš„ï¼ˆInsert æˆ– Updateï¼‰ï¼Œreturn object\nå–®ç­†</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.upsert({\nwhere: { id: 1 },\nupdate: { email: &#39;alice@prisma.io&#39; },\ncreate: { email: &#39;alice@prisma.io&#39; },\n});</code>\n        </deckgo-highlight-code>\n<p>é—œè¯å¤šç­†</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\n  posts: {\n    upsert: [\n      {\n        create: { title: &#39;This is my first post&#39; },\n        update: { title: &#39;This is my first post&#39; },\n        where: { id: 32 },\n      },\n      {\n        create: { title: &#39;This is mt second post&#39; },\n        update: { title: &#39;This is mt second post&#39; },\n        where: { id: 23 },\n      },\n    ],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\n  posts: {\n    delete: [{ id: 34 }, { id: 36 }],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>é‚„æœ‰ disconnect é—œè¯çš„ç”¨æ³•</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\n  posts: {\n    disconnect: [{ id: 44 }, { id: 46 }],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n<p>é‡æ–°æŒ‡å®šé—œè¯çš„ posts</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.update({\nwhere: { email: &#39;alice@prisma.io&#39; },\ndata: {\n  posts: {\n    set: [{ id: 32 }, { id: 42 }],\n  },\n},\n});</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n<h3>updateMany</h3>\n<ul>\n<li>å¿…é ˆè¦çµ¦ <code>data</code>ï¼ˆè¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯é€šå¸¸ input object çš„é‚£åŒ…ï¼‰</li>\n<li>æ‰¹é‡ update çš„éƒ¨åˆ† <code>where</code> æ˜¯ optionalï¼Œæ²’çµ¦æ˜¯æŒ‡å…¨éƒ¨</li>\n<li>return æœ‰ count çš„ BatchPayload object</li>\n</ul>\n<h2>â˜¼ Delete</h2>\n<h3>delete</h3>\n<ul>\n<li>\n<p>å¿…é ˆè¦çµ¦ <code>where</code> ç¯© id æˆ– unique</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const user = await prisma.user.delete({\nwhere: { id: 1 },\n});</code>\n        </deckgo-highlight-code>\n</li>\n<li>return deleted objectï¼Œä¸€æ¨£å¯ä»¥ <code>select</code>ã€<code>include</code></li>\n</ul>\n<h3>deleteMany</h3>\n<ul>\n<li><code>where</code> æ˜¯ optionalï¼Œæ²’çµ¦æ˜¯æŒ‡å…¨éƒ¨</li>\n<li>return æœ‰ count çš„ BatchPayload object</li>\n</ul>\n<h2>â˜¼ count</h2>\n<ul>\n<li>return æœ‰ count çš„ BatchPayload object</li>\n<li>å¯ä»¥çµ¦ <a href=\"https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/crud#reference-8\" target=\"_blank\" rel=\"nofollow\"><code>where</code>, <code>orderBy</code>, <code>skip</code>, <code>after</code>, <code>before</code>, <code>first</code>, <code>last</code></a></li>\n</ul>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const result = await prisma.user.count({\n  where: {\n    post: {\n      some: {\n        published: true,\n      },\n    },\n  },\n});</code>\n        </deckgo-highlight-code>\n<h1>Prisma Client Pagination</h1>\n<p>ç°¡ä»‹å…©ç¨®åˆ†é æ¨¡å¼</p>\n<h2>Offset pagination</h2>\n<p>åˆ©ç”¨ <code>skip</code>, <code>take</code> è¿…é€Ÿé¸å–åˆ°æŒ‡å®šçš„é é¢è³‡æ–™ç¯„åœï¼ˆMySQL ä¸­åˆ©ç”¨ OFFSETï¼‰\n<img src=\"https://i.imgur.com/GiMkJcJ.png\"></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">// å‡è¨­ä¸€é  20 ç­†ï¼Œå–ç¬¬ 11 é ï¼ˆæ­é… filter, sortï¼‰\nconst results = prisma.post.findMany({\n  skip: 200,\n  take: 20,\n  where: {\n    title: {\n      contains: &#39;Prisma&#39;,\n    },\n  },\n  orderBy: {\n    title: &#39;desc&#39;,\n  },\n});</code>\n        </deckgo-highlight-code>\n<ul>\n<li>Prosï¼šä¸”é©ç”¨ä»»æ„ sort (orderBy) å¾Œçš„â€œä¸è®Šâ€çš„çµæœï¼ˆæœŸé–“æœ‰å¢åˆªå€¼å¯èƒ½æœƒå½±éŸ¿åˆ°ï¼‰</li>\n<li>\n<p>Consï¼šé¸è¶Šå¾Œé¢çš„ç­†æ•¸è¶Šè€—èƒ½ï¼ˆå‡è¨­ skip 200,000ï¼‰ï¼Œå› ç‚ºå®ƒä¸€æ¨£æœƒå¾èµ·å§‹å¾€å¾Œæƒåˆ°ä½ è¦çš„é‚£æ®µ</p>\n<ul>\n<li>ä½†ä¸€èˆ¬ä¾†èªªåƒæ˜¯å€‹äººéƒ¨è½é€™ç¨®çš„è³‡æ–™é‡ä¸å¤§çš„éƒ½é‚„å¯ä»¥é©ç”¨</li>\n</ul>\n</li>\n</ul>\n<h2>Cursor-based pagination</h2>\n<p>åœ¨ç¶“é unique ä¸”æœ‰åºåˆ—çš„ column ï¼ˆEX. id æˆ– timestampï¼‰æ’åºéå¾Œçš„çµæœï¼Œå–å¾—æŒ‡å®šé» <code>cursor</code> å‰ï¼å¾Œ limited å€‹æ•¸ <code>take</code> çš„é¸å–ç¯„åœçµæœ\nå¯ä»¥æŠŠ cursor ç•¶æ›¸ç±¤çš„æ¦‚å¿µ\nï¼ˆMySQL not use OFFSETï¼Œè€Œæ˜¯æŸ¥è©¢å¤§æ–¼ cursor çš„å€¼ï¼‰\n<img src=\"https://i.imgur.com/tVLKzmy.png\"></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">// ä¸Šåœ–ç‚ºä¾‹\nconst firstQueryResults = prisma.post.findMany({\n  take: 4,\n  where: {\n    title: {\n      contains: &#39;Prisma&#39;, // optional\n    },\n  },\n  orderBy: {\n    id: &#39;asc&#39;,\n  },\n});\nconst lastPostInResults = firstQueryResults[3];\nconst myCursor = lastPostInResults.id; // 29</code>\n        </deckgo-highlight-code>\n<p>å‘ˆä¸Šï¼ŒæŒ‡å®šå¾ cursor ä½ç½®é–‹å§‹å– 4 å€‹</p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const secondQueryResults = prisma.post.findMany({\n  take: 4, // å–å¾Œ 4 ç­†ï¼Œè¦æ”¹å–å‰çš„è©±çµ¦è² æ•¸å³å¯\n  skip: 1, // èµ·å§‹åŒ…å« cursorï¼ˆä¸Šæ¬¡é¸å–çš„æœ€å¾Œä¸€å€‹ï¼‰ï¼Œæœƒ skip æ‰\n  cursor: {\n    id: myCursor, // 29\n  },\n  where: {\n    title: {\n      contains: &#39;Prisma&#39;,\n    },\n  },\n  orderBy: {\n    id: &#39;asc&#39;,\n  },\n});\nconst lastPostInResults = secondQueryResults[3];\nconst myCursor = lastPostInResults.id; // 52</code>\n        </deckgo-highlight-code>\n<p><img src=\"https://i.imgur.com/UISj2lZ.png\"></p>\n<ul>\n<li>Prosï¼šscalesï¼ˆå¢åˆªå€¼ä¸å½±éŸ¿ï¼‰</li>\n<li>Consï¼šå¿…é ˆè¦æ’åºæˆå”¯ä¸€çš„åºåˆ—ï¼ˆæœ‰é»æŠ½è±¡ï¼Œä½†è¨˜å¾—è¦æ‹¿ unique çš„å€¼ä¾† orderBy éå°±æ˜¯äº†ï¼‰ã€‚ä¸”æ²’è¾¦æ³•ç›´æ¥è·³åˆ°æŒ‡å®šé ï¼Œåªèƒ½é  cursor ï¼Œè€Œ cursor æ˜¯ä¸å¯é æ¸¬çš„ã€‚</li>\n<li>é©ç”¨å ´æ™¯ï¼šInfinite scrollã€ä¸€æ¬¡æ‰¹æ¬¡åˆ†é å®Œæ‰€æœ‰è³‡æ–™</li>\n</ul>\n<h1>Resources</h1>\n<ul>\n<li><a href=\"https://www.prisma.io/docs/getting-started/quickstart-typescript\" target=\"_blank\" rel=\"nofollow\">Prisma</a> ğŸ”†</li>\n<li><a href=\"https://www.fooish.com/sql/constraints.html\" target=\"_blank\" rel=\"nofollow\">SQL èªæ³•æ•™å­¸ã€Constraint é™åˆ¶å¯ä»¥åƒè€ƒé€™é‚Š</a></li>\n</ul>","timeToRead":19,"frontmatter":{"title":"Prisma - Schema, Data Model, Relations, Client","date":"09 Sep 2019","tags":["prisma"],"path":"blog/20190909","excerpt":"æœªä¾† Side project å¯èƒ½æœƒæ‡‰ç”¨åˆ°çš„ SDL first é–‹ç™¼æµç¨‹è§’åº¦ï¼Œç°¡ä»‹æ­¤å¯ä»¥å–ä»£å‚³çµ± ORM çš„ DB toolkitã€‚"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"blog/20170508","title":"WebForm åœ–ç‰‡ä¸Šå‚³æª¢æŸ¥","tags":["asp.net"],"excerpt":"é–‹æ”¾ä¸Šå‚³æœ‰å¯èƒ½è¢«å‚³å¥‡æ€ªæ±è¥¿çš„é¢¨éšªï¼Œåªæª¢æŸ¥æ‰€çœ‹åˆ°çš„å‰¯æª”åï¼Œè¬¹æ…ä¾†èªªä¼¼ä¹æ˜¯ä¸å¤ çš„ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170421","title":"å­˜å–é ç«¯ EventLog","tags":["asp.net","javascript"],"excerpt":"åœ¨å…¬å¸ä¸­å¯¦ä½œä¸€å€‹ Event log çš„æŸ¥è©¢å·¥å…·ã€‚ï¼ˆä¹‹å¾Œä¾†å¯«äº† D3 å‘ˆç¾æŸ¥è©¢ç•°å¸¸æŸ¥è©¢çš„éƒ¨åˆ†ï¼‰"}}},{"node":{"frontmatter":{"path":"blog/20170604","title":"Web App æ¨æ’­é€šçŸ¥","tags":["asp.net"],"excerpt":"éš¨è‘—è¡Œå‹•å’Œç©¿è¼‰è£ç½®çš„èˆˆèµ·ï¼Œæ¨æ’­é€šçŸ¥ (Push Notification) æˆç‚ºç¶­ç¹«Appç”¨æˆ¶é—œä¿‚ç›¸ç•¶æœ‰åŠ›çš„å·¥å…·"}}},{"node":{"frontmatter":{"path":"blog/20170714","title":"WebForm ä½¿ç”¨ reCAPTCHA é©—è­‰","tags":["asp.net"],"excerpt":"é€™å€‹æˆ‘ä¸æ˜¯æ©Ÿå™¨äººé©—è­‰ä¸€å®šä¸é™Œç”Ÿï¼Œæ»¿å¤šç™»å…¥ç•«é¢æœƒçœ‹åˆ°çš„ï¼Œå‰›å¥½ä»Šå¤©æ¥åˆ°æŠŠåœ–å½¢é©—è­‰æ”¹ç‚º reCAPTCHA å°±é †æ‰‹è¨˜ä¸‹ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170728","title":"WebForm è¨»å†Š JavaScript","tags":["asp.net","javascript"],"excerpt":"å‹•æ…‹ç”¢ç”ŸJSåœ¨ç›®å‰å…¬å¸å°ˆæ¡ˆä¸­æ˜¯æ»¿å¸¸ç”¨åˆ°çš„å°æŠ€å·§ï¼Œä¸åŒçš„ç”¨æ³•æœƒç”¢ç”Ÿåœ¨Web Page çš„ä¸åŒä½ç½®è€Œæœ‰ç›´è­¯å¼èªè¨€çš„å‰å¾Œé †åºå·®ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20180514","title":"JavaScript ä¸­ this æŒ‡å‘","tags":["javascript"],"excerpt":"ç°¡ä»‹ this æŒ‡å‘çš„å…­ç¨®æƒ…æ³ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190108","title":"JavaScript èªè­˜éåŒæ­¥ Callback, Promise, async/await","tags":["javascript"],"excerpt":"Asynchronous éåŒæ­¥çš„ä¸åŒå¯«æ³•çš„æ•´ç†ç­†è¨˜ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190707","title":"JavaScript HTML5 Web Worker & CRA ä½¿ç”¨è¸©é›·","tags":["javascript"],"excerpt":"JavaScript æ˜¯å–®åŸ·è¡Œç·’ã€å–®ç·šç¨‹çš„ç¨‹å¼èªè¨€ï¼Œæ‰€æœ‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µéƒ½æœƒåœ¨å †ç–Šä¸­è¢«åŸ·è¡Œï¼ŒWeb worker ç›¸ç•¶æ–¼å¯è®“ä¸»ç·šç¨‹é–‹å…¶ä»– threadã€‚"}}},{"node":{"frontmatter":{"path":"blog/20180521","title":"Web å¸¸è¦‹æ”»æ“Šæ‰‹æ³•","tags":["security"],"excerpt":"æ“æœ‰åŸºæœ¬çš„è³‡å®‰è§€å¿µä¿è­·å¥½è‡ªå®¶è³‡æ–™å’Œ user ä½¿ç”¨ç’°å¢ƒæ˜¯é–‹ç™¼äººå“¡é‡è¦çš„ä¸€é»ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191107","title":"Javascript Event loop - macro task & micro task","tags":["javascript"],"excerpt":"ä»‹ç´¹ Event loop å®¹æ˜“æ··æ·†çš„ç•°æ­¥ä»»å‹™ macro task & micro taskã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190906","title":"åˆæ¢ Storybook","tags":["javascript"],"excerpt":"åˆæ¢é€™æ¬¾èƒ½å¤ åœ¨é–‹ç™¼å‰ç«¯å…ƒä»¶æˆ–æ˜¯å‡½å¼åº«çš„åŒæ™‚ï¼Œå¯ä»¥å¿«é€Ÿåœ°å»ºç«‹å…ƒä»¶å„ç¨®æ“ä½œæ¨¡å¼æˆ–æ˜¯æ¨£å¼çš„å·¥å…·ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210109-3","title":"REST / RESTful & HTTP Methods","tags":["javascript"],"excerpt":"ç°¡æ˜“æ•´ç†ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210109-2","title":"IntersectionObserver","tags":["javascript"],"excerpt":"å…¬å¸å°ˆæ¡ˆæœ‰å€‹æ—¥æœŸé€£å‹•çš„ scroll å„ªåŒ–è©¦é©—ï¼ŒåŸå…ˆæ˜¯ç›£è½ scrollã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210110","title":"Pop Quiz","tags":["javascript"],"excerpt":"è¨˜éŒ„è¸©åˆ°çš„é™·é˜±é¡Œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190907","title":"GraphQL & Apollo Client","tags":["apollo"],"excerpt":"ç°¡å–®ä»‹ç´¹ React Client ç«¯å¦‚ä½•ç”¨ Apollo å° GraphQL Server åšè³‡æ–™å­˜å–æ“ä½œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200518","title":"å¸¸ç”¨ NoSQL é›²ç«¯è³‡æ–™åº« - Part 1 MongoDB","tags":["mongodb"],"excerpt":"ç°¡ä»‹ Relational/NoSQL databaseã€mongoose ORM å¯« mongo CRUD APIã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191125","title":"åˆæ¢ RxJSï¼ˆä¸‹ï¼‰","tags":["rxjs"],"excerpt":"ç°¡ä»‹ä¸Šæ¬¡æœªå®Œçš„ RxJS å‰©é¤˜è§’è‰²ï¼Œå’Œä»‹ç´¹ç›®å‰å…¬å¸å¾Œå°å°ˆæ¡ˆä½¿ç”¨çš„ redux-observableã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190906-2","title":"React Hooks - useCallback, useMemo, useRef","tags":["reactjs"],"excerpt":"JavaScript æ˜¯å–®åŸ·è¡Œç·’ã€å–®ç·šç¨‹çš„ç¨‹å¼èªè¨€ï¼Œæ‰€æœ‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µéƒ½æœƒåœ¨å †ç–Šä¸­è¢«åŸ·è¡Œï¼ŒWeb worker ç›¸ç•¶æ–¼å¯è®“ä¸»ç·šç¨‹é–‹å…¶ä»– threadã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210109","title":"Response Set-Cookie ç„¡æ•ˆ","tags":["apollo"],"excerpt":"è¨˜éŒ„å€‹ä¹‹å‰åœ¨å’ŒåŒäº‹å€‘å¼„ Side project æ™‚çŠ¯è ¢é‡åˆ°çš„å•é¡Œèˆ‡è§£æ±ºæ–¹å¼ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191017","title":"åˆæ¢ RxJSï¼ˆä¸Šï¼‰","tags":["rxjs"],"excerpt":"ç°¡ä»‹ç›¸é—œçš„è¨­è¨ˆæ¨¡å¼ä¸­çš„ Behavioral Patternï¼Œå†ä»‹ç´¹ RxJSï¼ˆå…ˆè¬› Observableï¼‰"}}},{"node":{"frontmatter":{"path":"blog/20200527","title":"å¸¸ç”¨ NoSQL é›²ç«¯è³‡æ–™åº« - Part 2 Firebase","tags":["firebase"],"excerpt":"ç°¡ä»‹ Google æä¾›çš„å¾Œç«¯æœå‹™å¹³è‡ºï¼ˆBaaSï¼‰ä¸­çš„å…©ç¨® DBï¼Œrealtime database å’Œ cloud firestoreã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200630","title":"Express - Authentication, Authorization and Security","tags":["security","express"],"excerpt":"ç°¡ä»‹ Express RESTful API Server ç¯„ä¾‹ä¸­ JWT æ¬Šé™ã€æˆæ¬Šç›¸é—œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200910","title":"Apollo Server å…¥é–€ç¯‡","tags":["apollo"],"excerpt":"å¿«é€Ÿè¤‡ç¿’å»å¹´åˆ†äº«çš„ GraphQL Schema å’Œ Client query èªæ³•ï¼Œä¸¦ç°¡ä»‹å¦‚ä½•ä»¥ Apollo Server å»ºç«‹ GraphQL Serverã€‚"}}}]}},"pageContext":{"postPath":"blog/20190909","translations":[{"hreflang":"en","path":"/blog/20190909"}]}}}