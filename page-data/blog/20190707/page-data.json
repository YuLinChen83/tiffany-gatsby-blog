{"componentChunkName":"component---src-templates-post-post-jsx","path":"/blog/20190707","result":{"data":{"markdownRemark":{"html":"<p>JavaScript æ˜¯å–®åŸ·è¡Œç·’ã€å–®ç·šç¨‹ï¼ˆsingle threaded runtimeï¼‰çš„ç¨‹å¼èªè¨€ï¼Œæ‰€æœ‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µéƒ½æœƒåœ¨å †ç–Šï¼ˆä¸»åŸ·è¡Œç·’/Stackï¼‰ä¸­è¢«åŸ·è¡Œï¼Œè€Œä¸”ä¸€æ¬¡åªæœƒåŸ·è¡Œä¸€å€‹ç¨‹å¼ç¢¼ç‰‡æ®µã€‚Web worker ç›¸ç•¶æ–¼å¯è®“ä¸»ç·šç¨‹é–‹å…¶ä»– threadã€‚</p>\n<p>W3Cï¼šA web worker is a JavaScript running in the background, without affecting the performance of the page.\né€™é‚Šå¯ä»¥å…ˆçœ‹å€‹ç°¡ä»‹ <a href=\"https://www.fullstackreact.com/articles/introduction-to-web-workers-with-react/\" target=\"_blank\" rel=\"nofollow\">A Guide to using Web Workers in React</a><br>\nå’Œé€™å€‹ <a href=\"https://codesandbox.io/s/w2v7zzn63w\" target=\"_blank\" rel=\"nofollow\">codesandbox example</a> æ„Ÿå—ä¸€ä¸‹æœ‰ç„¡ä½¿ç”¨ web worker çš„ UI é«”é©—å·®åˆ¥</p>\n<p>å¯ä»¥æ‡‰ç”¨åœ¨è¼ªè©¢ã€è™•ç†å¤§é‡è¨ˆç®—çš„æƒ…å¢ƒã€‚</p>\n<p>é€šè¨Šä½¿ç”¨å…ˆè¨˜å¾—ï¼šä¸ç®¡ä¸»ç·šç¨‹é‚„æ˜¯ woker å…§ï¼Œéƒ½æ˜¯ <code>postMessage</code> æ¨ã€ <code>onmessage</code> æ”¶ã€‚</p>\n<h3>Worker Example</h3>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">self.addEventListener(&#39;message&#39;, (event) =&gt; {\n  // ä¸»ç·šç¨‹æ¨é€è§¸ç™¼\n  self.postMessage(event.data); // æ¨é€çµ¦ä¸»ç·šç¨‹\n  self.close(); // worker é—œé–‰è‡ªèº«é‡‹æ”¾è³‡æº\n});</code>\n        </deckgo-highlight-code>\n<ol>\n<li>ç¨ç«‹çš„ js æª”æ¡ˆ</li>\n<li>æœ‰è‘—å®šç¾©ç›£è½ message çš„äº‹ä»¶ï¼ˆä¸»ç·šç¨‹ <code>postMessage</code> æ™‚è§¸ç™¼ï¼‰</li>\n<li>åœ¨ Worker åŸ·è¡Œç·’ä¸­ï¼Œ <code>self</code> å’Œ <code>this</code> éƒ½ä»£è¡¨å­åŸ·è¡Œç·’çš„å…¨åŸŸæ€§ç‰©ä»¶</li>\n<li><code>onmessage</code> ç”¨æ³•åŒ <code>addEventLister(â€˜messageâ€™, â€¦)</code></li>\n<li><code>self.close()</code> é—œé–‰ worker è‡ªèº«</li>\n</ol>\n<h3>ä¸»ç·šç¨‹ Example</h3>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">// main.js\nvar worker = new Worker(&#39;worker.js&#39;);\n// ä¸»ç·šç¨‹æ¨ data çµ¦ worker\nworker.postMessage(&#39;Hello World&#39;);\n\n// ä¸»ç·šç¨‹æ¥æ”¶ worker æ¨éä¾†çš„ data\nworker.onmessage = function(event) {\n  console.log(&#39;Received message &#39; + event.data);\n};\n// ç­‰åŒæ–¼\nworker.addEventListener(&#39;message&#39;, function(event) {\n  // ...\n});\n\n// worker å…§è‹¥æœ‰éŒ¯èª¤ä¸»ç·šç¨‹ onerror æœƒç›£è½åˆ°\nworker.onerror = function(event) {\n  // ...\n};\n// ç­‰åŒæ–¼\nworker.addEventListener(&#39;error&#39;, function(event) {\n  // ...\n});\n\n// ä¸»ç·šç¨‹é‡‹æ”¾ worker\nworker.terminate();</code>\n        </deckgo-highlight-code>\n<ol>\n<li>å‰µå»º worker å¯¦ä¾‹</li>\n<li>å®šç¾©æ¨é€ã€æ¥æ”¶è¡Œç‚º</li>\n<li>ä½¿ç”¨å®Œè¦é—œé–‰ä»¥ç¯€çœç³»çµ±è³‡æº</li>\n</ol>\n<h2>Worker å…§çš„é™åˆ¶</h2>\n<ol>\n<li>åŒæºé™åˆ¶ï¼šåŒ domain</li>\n<li>DOM é™åˆ¶ï¼ˆå…¨å±€å°è±¡ä¸åŒï¼‰ï¼šç„¡æ³•ä½¿ç”¨ <code>document</code> ã€ <code>window</code> ã€ <code>parent</code> é€™äº›å°è±¡ï¼›ä½†æ˜¯ Worker å¯ä»¥ä½¿ç”¨ <code>navigator</code> å’Œ <code>location</code> å°è±¡ã€‚</li>\n<li>é€šä¿¡è¯ç¹«ï¼ˆ <code>postMessage</code> ã€ <code>onmessage</code> ï¼‰</li>\n<li>è…³æœ¬é™åˆ¶ï¼šä¸èƒ½ä½¿ç”¨ <code>alert()</code> å’Œ <code>confirm()</code> ï¼›å¯ä»¥ä½¿ç”¨ XMLHttpRequest åš AJAX è«‹æ±‚ã€‚</li>\n<li>æœ¬æ©Ÿæ–‡ä»¶é™åˆ¶ï¼šç„¡æ³•è®€å–æœ¬åœ°æ–‡ä»¶ï¼Œå¼•ç”¨è…³æœ¬éœ€è‡ªç¶²è·¯</li>\n</ol>\n<h2>Worker ç¨®é¡</h2>\n<ol>\n<li>å°ˆç”¨ç·šç¨‹ï¼ˆDedicated Workerï¼‰ï¼šåªèƒ½ä¸€å€‹é é¢ä½¿ç”¨</li>\n<li>å…±äº«ç·šç¨‹ï¼ˆShared Workerï¼‰ï¼šå¤šå€‹é é¢å…±äº«ä½¿ç”¨</li>\n</ol>\n<h2>Create-React-App ä½¿ç”¨ web worker</h2>\n<ul>\n<li><code>npm install react-worker</code></li>\n<li>worker å…§è¦ä½¿ç”¨ ES6 å¯«æ³•éœ€è¦ <code>npm install worker-loader</code></li>\n<li>CRA ä¸ eject çš„æ–¹æ³• react-app-rewired\nä¿®æ”¹ config-overrides.js</li>\n</ul>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">const filterWarning = (config) =&gt; {\n  ...\n  config.module.rules.push({\n    test: /\\.worker\\.js$/,\n    use: {loader: &#39;worker-loader&#39;},\n  });\n  config.output.globalObject = &#39;this&#39;;\n  return config;\n};</code>\n        </deckgo-highlight-code>\n<h3>è¨»ï¼š</h3>\n<ol>\n<li>æ²’æœ‰ config.output.globalObject = 'this' çš„è©±æœƒæŠ“ä¸åˆ° window</li>\n<li>worker æª”åè¦ .worker.js çµå°¾</li>\n</ol>\n<p>é€™æ¬¡ç”±æ–¼å·¥ä½œä¸Šæœ‰å„ªåŒ–ä¸‹è¼‰å ±è¡¨çš„éœ€æ±‚è€Œæ¥è§¸äº† web worker ä¸¦å˜—è©¦ä½¿ç”¨ï¼Œç¨ä½œç ”ç©¶ä¸¦æ•´ç†äº†ä¸€é»ç­†è¨˜ç´€éŒ„ã€‚è‹¥æœ‰èªçŸ¥éŒ¯èª¤æˆ–æè¿°ä¸å¦¥çš„åœ°æ–¹æ­¡è¿æŒ‡æ­£ä¸¦çµ¦äºˆå»ºè­° ğŸ˜€<br>\nä¹…é•çš„æ›´æ–°ç­†è¨˜å‘¢ å…¶ä»–èººåœ¨ hackmd çš„é›œäº‚ç­†è¨˜å°± â‹¯â‹¯ï¼ˆé æœ›  </p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 58.333333333333336%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vR1LTgeM1uxiFadrOJSG9VwQOF_C4FbnINaLiap4UyL1YXDD5xcZ1MPwfrmKPWfpn4FEWRlU1ZGnUYX/embed\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>","timeToRead":2,"frontmatter":{"title":"JavaScript HTML5 Web Worker & CRA ä½¿ç”¨è¸©é›·","date":"07 Jul 2019","tags":["javascript"],"path":"blog/20190707","excerpt":"JavaScript æ˜¯å–®åŸ·è¡Œç·’ã€å–®ç·šç¨‹çš„ç¨‹å¼èªè¨€ï¼Œæ‰€æœ‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µéƒ½æœƒåœ¨å †ç–Šä¸­è¢«åŸ·è¡Œï¼ŒWeb worker ç›¸ç•¶æ–¼å¯è®“ä¸»ç·šç¨‹é–‹å…¶ä»– threadã€‚"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"blog/20210109-3","title":"REST / RESTful & HTTP Methods","tags":["javascript"],"excerpt":"ç°¡æ˜“æ•´ç†ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210109-2","title":"IntersectionObserver","tags":["javascript"],"excerpt":"å…¬å¸å°ˆæ¡ˆæœ‰å€‹æ—¥æœŸé€£å‹•çš„ scroll å„ªåŒ–è©¦é©—ï¼ŒåŸå…ˆæ˜¯ç›£è½ scrollã€‚"}}},{"node":{"frontmatter":{"path":"blog/20210110","title":"Pop Quiz","tags":["javascript"],"excerpt":"è¨˜éŒ„è¸©åˆ°çš„é™·é˜±é¡Œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191107","title":"Javascript Event loop - macro task & micro task","tags":["javascript"],"excerpt":"ä»‹ç´¹ Event loop å®¹æ˜“æ··æ·†çš„ç•°æ­¥ä»»å‹™ macro task & micro taskã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190108","title":"JavaScript èªè­˜éåŒæ­¥ Callback, Promise, async/await","tags":["javascript"],"excerpt":"Asynchronous éåŒæ­¥çš„ä¸åŒå¯«æ³•çš„æ•´ç†ç­†è¨˜ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20180521","title":"Web å¸¸è¦‹æ”»æ“Šæ‰‹æ³•","tags":["security"],"excerpt":"æ“æœ‰åŸºæœ¬çš„è³‡å®‰è§€å¿µä¿è­·å¥½è‡ªå®¶è³‡æ–™å’Œ user ä½¿ç”¨ç’°å¢ƒæ˜¯é–‹ç™¼äººå“¡é‡è¦çš„ä¸€é»ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20180514","title":"JavaScript ä¸­ this æŒ‡å‘","tags":["javascript"],"excerpt":"ç°¡ä»‹ this æŒ‡å‘çš„å…­ç¨®æƒ…æ³ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190906","title":"åˆæ¢ Storybook","tags":["javascript"],"excerpt":"åˆæ¢é€™æ¬¾èƒ½å¤ åœ¨é–‹ç™¼å‰ç«¯å…ƒä»¶æˆ–æ˜¯å‡½å¼åº«çš„åŒæ™‚ï¼Œå¯ä»¥å¿«é€Ÿåœ°å»ºç«‹å…ƒä»¶å„ç¨®æ“ä½œæ¨¡å¼æˆ–æ˜¯æ¨£å¼çš„å·¥å…·ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170728","title":"WebForm è¨»å†Š JavaScript","tags":["asp.net","javascript"],"excerpt":"å‹•æ…‹ç”¢ç”ŸJSåœ¨ç›®å‰å…¬å¸å°ˆæ¡ˆä¸­æ˜¯æ»¿å¸¸ç”¨åˆ°çš„å°æŠ€å·§ï¼Œä¸åŒçš„ç”¨æ³•æœƒç”¢ç”Ÿåœ¨Web Page çš„ä¸åŒä½ç½®è€Œæœ‰ç›´è­¯å¼èªè¨€çš„å‰å¾Œé †åºå·®ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170604","title":"Web App æ¨æ’­é€šçŸ¥","tags":["asp.net"],"excerpt":"éš¨è‘—è¡Œå‹•å’Œç©¿è¼‰è£ç½®çš„èˆˆèµ·ï¼Œæ¨æ’­é€šçŸ¥ (Push Notification) æˆç‚ºç¶­ç¹«Appç”¨æˆ¶é—œä¿‚ç›¸ç•¶æœ‰åŠ›çš„å·¥å…·"}}},{"node":{"frontmatter":{"path":"blog/20170714","title":"WebForm ä½¿ç”¨ reCAPTCHA é©—è­‰","tags":["asp.net"],"excerpt":"é€™å€‹æˆ‘ä¸æ˜¯æ©Ÿå™¨äººé©—è­‰ä¸€å®šä¸é™Œç”Ÿï¼Œæ»¿å¤šç™»å…¥ç•«é¢æœƒçœ‹åˆ°çš„ï¼Œå‰›å¥½ä»Šå¤©æ¥åˆ°æŠŠåœ–å½¢é©—è­‰æ”¹ç‚º reCAPTCHA å°±é †æ‰‹è¨˜ä¸‹ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170508","title":"WebForm åœ–ç‰‡ä¸Šå‚³æª¢æŸ¥","tags":["asp.net"],"excerpt":"é–‹æ”¾ä¸Šå‚³æœ‰å¯èƒ½è¢«å‚³å¥‡æ€ªæ±è¥¿çš„é¢¨éšªï¼Œåªæª¢æŸ¥æ‰€çœ‹åˆ°çš„å‰¯æª”åï¼Œè¬¹æ…ä¾†èªªä¼¼ä¹æ˜¯ä¸å¤ çš„ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20170421","title":"å­˜å–é ç«¯ EventLog","tags":["asp.net","javascript"],"excerpt":"åœ¨å…¬å¸ä¸­å¯¦ä½œä¸€å€‹ Event log çš„æŸ¥è©¢å·¥å…·ã€‚ï¼ˆä¹‹å¾Œä¾†å¯«äº† D3 å‘ˆç¾æŸ¥è©¢ç•°å¸¸æŸ¥è©¢çš„éƒ¨åˆ†ï¼‰"}}},{"node":{"frontmatter":{"path":"blog/20210109","title":"Response Set-Cookie ç„¡æ•ˆ","tags":["apollo"],"excerpt":"è¨˜éŒ„å€‹ä¹‹å‰åœ¨å’ŒåŒäº‹å€‘å¼„ Side project æ™‚çŠ¯è ¢é‡åˆ°çš„å•é¡Œèˆ‡è§£æ±ºæ–¹å¼ã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200518","title":"å¸¸ç”¨ NoSQL é›²ç«¯è³‡æ–™åº« - Part 1 MongoDB","tags":["mongodb"],"excerpt":"ç°¡ä»‹ Relational/NoSQL databaseã€mongoose ORM å¯« mongo CRUD APIã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191125","title":"åˆæ¢ RxJSï¼ˆä¸‹ï¼‰","tags":["rxjs"],"excerpt":"ç°¡ä»‹ä¸Šæ¬¡æœªå®Œçš„ RxJS å‰©é¤˜è§’è‰²ï¼Œå’Œä»‹ç´¹ç›®å‰å…¬å¸å¾Œå°å°ˆæ¡ˆä½¿ç”¨çš„ redux-observableã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190907","title":"GraphQL & Apollo Client","tags":["apollo"],"excerpt":"ç°¡å–®ä»‹ç´¹ React Client ç«¯å¦‚ä½•ç”¨ Apollo å° GraphQL Server åšè³‡æ–™å­˜å–æ“ä½œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20190906-2","title":"React Hooks - useCallback, useMemo, useRef","tags":["reactjs"],"excerpt":"JavaScript æ˜¯å–®åŸ·è¡Œç·’ã€å–®ç·šç¨‹çš„ç¨‹å¼èªè¨€ï¼Œæ‰€æœ‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µéƒ½æœƒåœ¨å †ç–Šä¸­è¢«åŸ·è¡Œï¼ŒWeb worker ç›¸ç•¶æ–¼å¯è®“ä¸»ç·šç¨‹é–‹å…¶ä»– threadã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200910","title":"Apollo Server å…¥é–€ç¯‡","tags":["apollo"],"excerpt":"å¿«é€Ÿè¤‡ç¿’å»å¹´åˆ†äº«çš„ GraphQL Schema å’Œ Client query èªæ³•ï¼Œä¸¦ç°¡ä»‹å¦‚ä½•ä»¥ Apollo Server å»ºç«‹ GraphQL Serverã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200527","title":"å¸¸ç”¨ NoSQL é›²ç«¯è³‡æ–™åº« - Part 2 Firebase","tags":["firebase"],"excerpt":"ç°¡ä»‹ Google æä¾›çš„å¾Œç«¯æœå‹™å¹³è‡ºï¼ˆBaaSï¼‰ä¸­çš„å…©ç¨® DBï¼Œrealtime database å’Œ cloud firestoreã€‚"}}},{"node":{"frontmatter":{"path":"blog/20200630","title":"Express - Authentication, Authorization and Security","tags":["security","express"],"excerpt":"ç°¡ä»‹ Express RESTful API Server ç¯„ä¾‹ä¸­ JWT æ¬Šé™ã€æˆæ¬Šç›¸é—œã€‚"}}},{"node":{"frontmatter":{"path":"blog/20191017","title":"åˆæ¢ RxJSï¼ˆä¸Šï¼‰","tags":["rxjs"],"excerpt":"ç°¡ä»‹ç›¸é—œçš„è¨­è¨ˆæ¨¡å¼ä¸­çš„ Behavioral Patternï¼Œå†ä»‹ç´¹ RxJSï¼ˆå…ˆè¬› Observableï¼‰"}}},{"node":{"frontmatter":{"path":"blog/20190909","title":"Prisma - Schema, Data Model, Relations, Client","tags":["prisma"],"excerpt":"æœªä¾† Side project å¯èƒ½æœƒæ‡‰ç”¨åˆ°çš„ SDL first é–‹ç™¼æµç¨‹è§’åº¦ï¼Œç°¡ä»‹æ­¤å¯ä»¥å–ä»£å‚³çµ± ORM çš„ DB toolkitã€‚"}}}]}},"pageContext":{"postPath":"blog/20190707","translations":[{"hreflang":"en","path":"/blog/20190707"}]}}}